<!DOCTYPE html>
<html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="flattr:id" content="e7nqg5"> <title>åŸºç¡€ç®—æ³•æ‚è°ˆ | Mooyyu Crab.â€™s Blog</title> <meta name="generator" content="Jekyll v3.9.0"> <meta property="og:title" content="åŸºç¡€ç®—æ³•æ‚è°ˆ"> <meta name="author" content="mooyyu"> <meta property="og:locale" content="en_US"> <meta name="description" content="ä¸€äº›åŸºç¡€ç®—æ³•çš„å¤§æ‚çƒ©"> <meta property="og:description" content="ä¸€äº›åŸºç¡€ç®—æ³•çš„å¤§æ‚çƒ©"> <link rel="canonical" href="https://mooyyu.github.io/docs/algorithm/basic.html"> <meta property="og:url" content="https://mooyyu.github.io/docs/algorithm/basic.html"> <meta property="og:site_name" content="Mooyyu Crab.â€™s Blog"> <meta property="og:type" content="article"> <meta property="article:published_time" content="2020-04-06T00:00:00+00:00"> <meta name="google-site-verification" content="0LZg36yiItnOtvXj-x8GPjsLmWZk9ujUR7nl6SRb28g"> <meta name="baidu-site-verification" content="code-0BzdQrWuUd"> <script type="application/ld+json">
{"headline":"åŸºç¡€ç®—æ³•æ‚è°ˆ","dateModified":"2020-04-06T00:00:00+00:00","datePublished":"2020-04-06T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mooyyu.github.io/docs/algorithm/basic.html"},"author":{"@type":"Person","name":"mooyyu"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://mooyyu.github.io/assets/images/logo/mooyyu/m.png"},"name":"mooyyu"},"description":"ä¸€äº›åŸºç¡€ç®—æ³•çš„å¤§æ‚çƒ©","url":"https://mooyyu.github.io/docs/algorithm/basic.html","@type":"BlogPosting","@context":"https://schema.org"}</script> <link rel="icon" href="/assets/favicon.ico"> <link rel="stylesheet" href="/assets/stylesheets/main.css?v=20210128-1"> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="/assets/javascript/head.min.js"></script> <script type="text/javascript">

      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = [ 'mooyyu.github.io', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/Mooyyu Crab.'s Github Page/, '')
      if (domains.indexOf(window.location.hostname) == -1)
        window.top.location.href = 'https://mooyyu.github.io' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
      if (location.protocol != 'https:' && window.location.hostname == 'mooyyu.github.io')
        location.href = 'https:' + window.location.href.substring(window.location.protocol.length);

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/font-awesome.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js",
          "/assets/javascript/pop.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"This site use cookies to ensure you get the best experience on the website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
        $("body").on('click', '[data-stopPropagation]', function (e) {
          e.stopPropagation();
        });
      });
    </script> </head> <body role="document"> <nav class="navbar navbar-default navbar-fixed-top custom-no-margin"> <div class="container"> <div class="navbar-header"> <a href="/" class="navbar-brand" style="color: slategrey;"> Mooyyu Crab.'s Blog </a> <img id="daynite" src="/assets/images/btn-night.svg" alt="Dark Mode" width="32" height="32"> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse" id="navbar-main"> <ul class="nav navbar-nav"> <li><a href="/whoami/">WHO AM I? </a></li> <li class="dropdown siteindex"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation">Site Index <span class="caret"></span></a> <ul class="dropdown-menu"> <li class="dropdown dropdown-submenu algorithm"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-stoppropagation="true" id="navbar-sub-algorithm">Algorithm</a> <ul class="dropdown-menu"> <li><a href="/meta/algorithm/"> All documents </a></li> <li class="divider"> <li><a href="/docs/algorithm/Math-1.html">ç®—æ³•ç«èµ›ç®€å•æ•°è®ºçŸ¥è¯†(ä¸€)</a></li> <li><a href="/docs/algorithm/DP-knapsack.html">åŠ¨æ€è§„åˆ’: èƒŒåŒ…é—®é¢˜ (ä¸€)</a></li> <li><a href="/docs/algorithm/Graph-shortest_path.html">å›¾è®ºæµ…è°ˆä¹‹æœ€çŸ­è·¯</a></li> <li><a href="/docs/algorithm/DP-linear.html">åŠ¨æ€è§„åˆ’å…¥é—¨ä¹‹çº¿æ€§æå€¼æ¨¡å‹</a></li> <li><a href="/docs/algorithm/DS-1.html">ç®—æ³•ç«èµ›ç®€å•æ•°æ®ç»“æ„(ä¸€)</a></li> <li><a href="/docs/algorithm/Graph-segment_tree_scan.html">çº¿æ®µæ ‘ä¹‹æ‰«æçº¿æµ…è°ˆ</a></li> <li><a href="/docs/algorithm/basic.html">åŸºç¡€ç®—æ³•æ‚è°ˆ</a></li> </ul> </li> <li class="dropdown dropdown-submenu oicode"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-stoppropagation="true" id="navbar-sub-oicode">OI-code</a> <ul class="dropdown-menu"> <li><a href="/meta/oicode/"> All documents </a></li> <li class="divider"> <li><a href="/docs/oicode/B1.html"><strong>B1</strong>: å‰ç¼€å’Œä¸å·®åˆ†</a></li> <li><a href="/docs/oicode/B2.html"><strong>B2</strong>: å¿«é€Ÿç»„åˆ</a></li> <li><a href="/docs/oicode/B3.html"><strong>B3</strong>: äºŒåˆ†æŸ¥æ‰¾</a></li> <li><a href="/docs/oicode/B4-add.html"><strong>B4</strong>: é«˜ç²¾åº¦åŠ æ³•</a></li> <li><a href="/docs/oicode/B4-div.html"><strong>B4</strong>: é«˜ç²¾åº¦é™¤æ³•</a></li> <li><a href="/docs/oicode/B4-multi.html"><strong>B4</strong>: é«˜ç²¾åº¦ä¹˜æ³•</a></li> <li><a href="/docs/oicode/B4-sub.html"><strong>B4</strong>: é«˜ç²¾åº¦å‡æ³•</a></li> <li><a href="/docs/oicode/D1.html"><strong>D1</strong>: å•è°ƒæ ˆ</a></li> <li><a href="/docs/oicode/D2.html"><strong>D2</strong>: å•è°ƒé˜Ÿåˆ—</a></li> <li><a href="/docs/oicode/D3.html"><strong>D3</strong>: Spare Table</a></li> <li><a href="/docs/oicode/D4.html"><strong>D4</strong>: å­—å…¸æ ‘</a></li> <li><a href="/docs/oicode/D5.html"><strong>D5</strong>: å¹¶æŸ¥é›†</a></li> <li><a href="/docs/oicode/D6-rc.html"><strong>D6</strong>: æ ‘çŠ¶æ•°ç»„-é™å®šåŒºé—´è®¡æ•°</a></li> <li><a href="/docs/oicode/D6-surs.html"><strong>D6</strong>: æ ‘çŠ¶æ•°ç»„-å•ç‚¹æ›´æ–°åŒºé—´æ±‚å’Œ</a></li> <li><a href="/docs/oicode/D7-basic.html"><strong>D7</strong>: çº¿æ®µæ ‘-åŸºç¡€</a></li> <li><a href="/docs/oicode/G1.html"><strong>G1</strong>: äºŒåˆ†å›¾-åˆ¤å®š</a></li> <li><a href="/docs/oicode/G2.html"><strong>G2</strong>: äºŒåˆ†å›¾-æœ€å¤§åŒ¹é…</a></li> <li><a href="/docs/oicode/G3.html"><strong>G3</strong>: Astar kçŸ­è·¯ on matrix</a></li> <li><a href="/docs/oicode/G4.html"><strong>G4</strong>: æ‹“æ‰‘æ’åº</a></li> <li><a href="/docs/oicode/G5.html"><strong>G5</strong>: è¿é€šæ— ç¯æ— å‘å›¾çš„é‡å¿ƒ</a></li> <li><a href="/docs/oicode/G6.html"><strong>G6</strong>: MST-Kruskal</a></li> <li><a href="/docs/oicode/G7.html"><strong>G7</strong>: MST-Prim</a></li> <li><a href="/docs/oicode/G8.html"><strong>G8</strong>: ShortestPath-BellmanFord</a></li> <li><a href="/docs/oicode/G9.html"><strong>G9</strong>: ShortestPath-Dijkstra</a></li> <li><a href="/docs/oicode/G9-hopt.html"><strong>G9</strong>: ShortestPath-Dijkstra Heap OPT</a></li> <li><a href="/docs/oicode/G10.html"><strong>G10</strong>: ShortestPath-SPFA</a></li> <li><a href="/docs/oicode/G11.html"><strong>G11</strong>: ShortestPath-Floyd</a></li> <li><a href="/docs/oicode/M1.html"><strong>M1</strong>: å¿«é€Ÿå¹‚ä¸é¾Ÿé€Ÿä¹˜</a></li> <li><a href="/docs/oicode/M2.html"><strong>M2</strong>: æ¬§å‡ é‡Œå¾—-æœ€å¤§å…¬çº¦æ•°</a></li> <li><a href="/docs/oicode/M2-ft.html"><strong>M2</strong>: EXæ¬§å‡ é‡Œå¾—-ç¿¡èœ€å®šç†</a></li> <li><a href="/docs/oicode/M2-lce.html"><strong>M2</strong>: EXæ¬§å‡ é‡Œå¾—-çº¿æ€§åŒä½™æ–¹ç¨‹</a></li> <li><a href="/docs/oicode/M2-mi.html"><strong>M2</strong>: EXæ¬§å‡ é‡Œå¾—-ä¹˜æ³•é€†å…ƒ</a></li> <li><a href="/docs/oicode/M3-flt.html"><strong>M3</strong>: è´¹é©¬å°å®šç†-ä¹˜æ³•é€†å…ƒ</a></li> <li><a href="/docs/oicode/M4.html"><strong>M4</strong>: åˆ†è§£è´¨å› æ•°</a></li> <li><a href="/docs/oicode/M4-euler.html"><strong>M4</strong>: åˆ†è§£è´¨å› æ•°-æ¬§æ‹‰å‡½æ•°</a></li> <li><a href="/docs/oicode/M4-prc.html"><strong>M4</strong>: åˆ†è§£è´¨å› æ•°-å¤šæ•°ä¹˜ç§¯çº¦æ•°è®¡æ•°</a></li> <li><a href="/docs/oicode/M4-prs.html"><strong>M4</strong>: åˆ†è§£è´¨å› æ•°-å¤šæ•°ä¹˜ç§¯çº¦æ•°æ±‚å’Œ</a></li> <li><a href="/docs/oicode/M5.html"><strong>M5</strong>: æ¬§æ‹‰ç­›</a></li> <li><a href="/docs/oicode/M5-ps.html"><strong>M5</strong>: æ¬§æ‹‰ç­›-è´¨æ•°ç­›</a></li> <li><a href="/docs/oicode/M6.html"><strong>M6</strong>: åŸƒæ°ç­›-è´¨æ•°ç­›</a></li> <li><a href="/docs/oicode/M7.html"><strong>M7</strong>: Steinç®—æ³•-æœ€å¤§å…¬çº¦æ•°</a></li> <li><a href="/docs/oicode/M8.html"><strong>M8</strong>: çŸ©é˜µä¹˜æ³•ä¸å¿«é€Ÿå¹‚</a></li> <li><a href="/docs/oicode/O1.html"><strong>O1</strong>: å¿«é€Ÿæ’åº</a></li> <li><a href="/docs/oicode/O2.html"><strong>O2</strong>: å¹¶å½’æ’åº</a></li> <li><a href="/docs/oicode/S1.html"><strong>S1</strong>: KMP</a></li> <li><a href="/docs/oicode/S2.html"><strong>S2</strong>: å­—ç¬¦ä¸²å“ˆå¸Œ</a></li> </ul> </li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-algorithm">ä¼ ç»Ÿç®—æ³• <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/docs/algorithm/basic">åŸºç¡€ç®—æ³•æ‚è°ˆ</a></li> <li class="divider"> <li><a href="/docs/algorithm/DS-1">ç®—æ³•ç«èµ›ç®€å•æ•°æ®ç»“æ„(ä¸€)</a></li> <li class="divider"> <li><a href="/docs/algorithm/DP-knapsack">åŠ¨æ€è§„åˆ’:èƒŒåŒ…é—®é¢˜(ä¸€)</a></li> <li><a href="/docs/algorithm/DP-linear">åŠ¨æ€è§„åˆ’å…¥é—¨ä¹‹çº¿æ€§æå€¼æ¨¡å‹</a></li> <li class="divider"> <li><a href="/docs/algorithm/Graph-shortest_path">å›¾è®ºæµ…è°ˆä¹‹æœ€çŸ­è·¯</a></li> <li><a href="/docs/algorithm/Graph-segment_tree_scan">çº¿æ®µæ ‘ä¹‹æ‰«æçº¿æµ…è°ˆ</a></li> <li class="divider"> <li><a href="/docs/algorithm/Math-1">ç®—æ³•ç«èµ›ç®€å•æ•°è®ºçŸ¥è¯†(ä¸€)</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-math">C++ç¬”è®° <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a>ğŸ¦‰å³å°†ä¸Šçº¿</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-math">æ•°å­¦ç¬”è®° <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a>ğŸ¦‰å³å°†ä¸Šçº¿</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-ai">AIç¬”è®° <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a>ğŸ¦‰å³å°†ä¸Šçº¿</a></li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right visible-lg-block"> </ul> </div> </div> </nav> <div class="container" role="main"> <div class="row"> <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding"> <div class="custom-fixed-sidebar"> <div id="toc"></div> </div> </div> <div class="col-lg-9 col-md-8 custom-bg-white"> <div class="row"> <div class="col-md-12 custom-article"> <p class="text-right pull-right visible-lg-block hidden-print small custom-pt25"> <a href="//github.com/mooyyu" target="_blank" data-toggle="tooltip" data-placement="bottom" title="Visit mooyyu's profile on Github"><img class="avatar avatar-small" alt="mooyyu" width="30" height="30" data-proofer-ignore="true" src="https://avatars3.githubusercontent.com/mooyyu?v=3&s=30" srcset="https://avatars3.githubusercontent.com/mooyyu?v=3&s=30 1x, https://avatars3.githubusercontent.com/mooyyu?v=3&s=60 2x, https://avatars3.githubusercontent.com/mooyyu?v=3&s=90 3x, https://avatars3.githubusercontent.com/mooyyu?v=3&s=120 4x"></a> </p> <h1 class="custom-article-header">åŸºç¡€ç®—æ³•æ‚è°ˆ</h1> <p class="text-right pull-right small">06 April 2020</p> <p class="small"> ä¸€äº›åŸºç¡€ç®—æ³•çš„å¤§æ‚çƒ© </p> <h2 id="æœ¬æ–‡ä¸»è¦å†…å®¹">æœ¬æ–‡ä¸»è¦å†…å®¹</h2> <ul> <li>äºŒåˆ†</li> <li>å‰ç¼€å’Œä¸å·®åˆ†</li> <li>å¸¸ç”¨æ’åºåŠå…¶åŸºæœ¬åº”ç”¨</li> <li>ä½è¿ç®—ä¸äºŒè¿›åˆ¶</li> <li>å­—ç¬¦ä¸²å“ˆå¸Œ</li> </ul> <h2 id="äºŒåˆ†">äºŒåˆ†</h2> <h3 id="å¼•å…¥äºŒåˆ†æŸ¥æ‰¾å‡½æ•°binary_search">å¼•å…¥ï¼šäºŒåˆ†æŸ¥æ‰¾å‡½æ•°\(binary\_search\)</h3> <p>\(STL\)ä¸­çš„\(binary\_search(begin, end, value, comp = operator\!\!&lt;)\)å‡½æ•°çš„åŠŸèƒ½ç®€å•æ¥è¯´æ˜¯<del>åˆ¤æ–­ä¸€ä¸ªã€Œå•è°ƒã€åºåˆ—\([l, r)\)ä¸­æ˜¯å¦å­˜åœ¨ã€Œå€¼ã€ä¸º\(value\)çš„å…ƒç´ </del>ã€‚ä½†è¿™æ ·è¯´æ˜¯ä¸ä¸¥è°¨çš„ï¼Œã€Œå•è°ƒã€å¹¶ä¸ä¸€å®šæ˜¯æŒ‡å¤§å°ï¼Œç›¸åº”åœ°ï¼Œã€Œå€¼ã€ä¹Ÿå¹¶éä¸€å®šæ˜¯æŒ‡æ•°å€¼ï¼Œæœ¬è´¨ä¸Šæ¥è¯´ï¼Œå®ƒä»¬æ˜¯é’ˆå¯¹äºæŸç§ç»™å®šçš„æ€§è´¨è€Œè¨€çš„ï¼Œè€Œè¿™æ€§è´¨ç”±\(comp\)å’Œ\(value\)æ¥å…±åŒæè¿°ã€‚ä¸‹é¢æ¥è¯¦ç»†åˆ†æä¸€ä¸‹è¿™ä¸ªå‡½æ•°ã€‚</p> <p><strong>å‡½æ•°åŠŸèƒ½:</strong>åˆ¤æ–­åºåˆ—\([l, r)\)ä¸­æ˜¯å¦å­˜åœ¨æ»¡è¶³ã€Œ\(comp\)å’Œ\(value\)æè¿°çš„æ€§è´¨ã€çš„å…ƒç´ ï¼Œä¹Ÿå³æ£€æŸ¥ã€ŒåŸºäºæ¯”è¾ƒæ–¹æ³•\(comp\)ï¼Œç­‰äº\(value\)ã€çš„å…ƒç´ æ˜¯å¦åœ¨åºåˆ—\([l, r)\)ä¸­ã€‚</p> <ul> <li>ã€ŒåŸºäºæ¯”è¾ƒæ–¹æ³•\(comp\)ï¼Œç­‰äº\(value\)ã€:è‹¥\(comp(element, value) = false\mbox{ &amp;&amp; }!comp(value, element) = true\)ï¼Œåˆ™ç§°\(element = value\)ï¼Œå³\(element\)æ»¡è¶³ã€Œ\(comp\)å’Œ\(value\)æè¿°çš„æ€§è´¨ã€ã€‚</li> </ul> <p><strong>å‡½æ•°æ‰§è¡ŒæˆåŠŸçš„æ¡ä»¶:</strong>åºåˆ—\([l, r)\)å¯¹äº\(comp\)å’Œ\(value\)å…±åŒæè¿°çš„æ€§è´¨å•è°ƒï¼Œå³æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š</p> <ul> <li>å¯¹äºè¡¨è¾¾å¼\(comp(element, vale)\)ï¼Œæ‰€æœ‰å€¼ä¸º\(true\)çš„å…ƒç´ åœ¨å€¼ä¸º\(false\)çš„å…ƒç´ çš„å·¦è¾¹ã€‚</li> <li>å¯¹äºè¡¨è¾¾å¼\(!comp(value, element)\)ï¼Œæ‰€æœ‰å€¼ä¸º\(true\)çš„å…ƒç´ åœ¨å€¼ä¸º\(false\)çš„å…ƒç´ çš„å·¦è¾¹ã€‚</li> <li>å¯¹äºæ‰€æœ‰å…ƒç´ ï¼Œè‹¥\(comp(element,value) = true\)ï¼Œåˆ™\(!comp(value, element) = true\)ã€‚</li> </ul> <p>å¯ä»¥æ³¨æ„åˆ°ï¼Œæ•´ä¸ªåˆ†æè¿‡ç¨‹ä¸­æ˜¯æ²¡æœ‰æ•°å€¼æ¯”è¾ƒ(å¤§å°æ¯”è¾ƒå’Œç›¸ç­‰åˆ¤æ–­éƒ½æ²¡æœ‰)çš„ï¼Œæœ‰çš„åªæ˜¯æ€§è´¨(è¡¨è¾¾å¼)çš„æ»¡è¶³ä¸å¦ï¼Œè¿™ä¾¿æ˜¯äºŒåˆ†çš„æœ¬è´¨ã€‚</p> <p>æˆ‘ä»¬ç»§ç»­çœ‹çœ‹\(binary\_search\)æ˜¯å¦‚ä½•å®ç°çš„ï¼š</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">ForwardIt</span><span class="p">,</span> <span class="k">class</span> <span class="nc">T</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Compare</span><span class="p">&gt;</span>
<span class="kt">bool</span> <span class="nf">binary_search</span><span class="p">(</span><span class="n">ForwardIt</span> <span class="n">first</span><span class="p">,</span> <span class="n">ForwardIt</span> <span class="n">last</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">,</span> <span class="n">Compare</span> <span class="n">comp</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">lower_bound</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">comp</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">first</span> <span class="o">==</span> <span class="n">last</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="n">comp</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">first</span><span class="p">)));</span>
<span class="p">}</span>
</code></pre></div></div> <p>å¯ä»¥çœ‹åˆ°å…¶å†…éƒ¨æ˜¯ç”±\(lower\_bound\)å®ç°çš„ï¼Œè€Œ\(lower\_bound\)å…¶å®æ‰æ˜¯äºŒåˆ†çš„çœŸæ­£å®ç°ï¼Œ\(binary\_search\)ä»…ä»…æ˜¯å¥—ä¸ªå£³ï¼Œæ˜¯äºŒåˆ†çš„ä¸€ç§ç‰¹æ®ŠåŒ–çš„åº”ç”¨ã€‚ä¸‹é¢æˆ‘ä»¬è¿›ä¸€æ­¥çœ‹çœ‹äºŒåˆ†åˆ°åº•å®ç°äº†ä»€ä¹ˆã€‚</p> <h3 id="æ¢ç©¶äºŒåˆ†çš„æœ¬è´¨">æ¢ç©¶ï¼šäºŒåˆ†çš„æœ¬è´¨</h3> <p>äºŒåˆ†æ˜¯æœ€åŸºç¡€çš„ç®—æ³•æ€æƒ³ï¼Œè¿™é‡Œæˆ‘ä»¬è®¨è®ºæ›´ä¸ºæ™®é€šçš„äºŒåˆ†ç®—æ³•ã€‚</p> <p>å¯¹äºä¸€ä¸ªç»™å®šçš„åºåˆ—\([l, r)\)ï¼Œä¸€ä¸ªç»™å®šçš„å¯¹äºè¯¥åºåˆ—ä¸­å…ƒç´ çš„æ¡ä»¶\(check()\)ï¼Œè‹¥æ»¡è¶³ä¸‹é¢çš„æ€§è´¨ï¼Œåˆ™è¯¥åºåˆ—å¯¹äºè¯¥æ¡ä»¶å¯ä»¥è¢«äºŒåˆ†æ±‚è§£ï¼Œä¸”äºŒåˆ†ä¸€å®šèƒ½å¾—åˆ°è§£ã€‚\(\exists mid\in [l, r)\)ï¼Œå°†è¯¥åºåˆ—åˆ’åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—\([l, mid),[mid, r)\)ï¼Œæ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€</p> <ol> <li> \[[l, mid)\not = \emptyset, \forall e\in [l, mid), check(e) = true, \forall u\in [mid, r), check(u) = false\] </li> <li> \[[mid, r)\not = \emptyset, \forall e\in [mid, r), check(e) = true, \forall u\in [l, mid), check(u) = false\] </li> </ol> <p>é‚£ä¹ˆäºŒåˆ†å¾—åˆ°çš„è§£çš„æ„ä¹‰å°±æ˜¯ã€Œè¯¥åºåˆ—ä¸­æ»¡è¶³ç»™å®šæ¡ä»¶çš„ä¸´ç•Œå…ƒç´ ã€ã€‚</p> <h4 id="äºŒåˆ†çš„ä¸¤ç§æ¨¡å‹">äºŒåˆ†çš„ä¸¤ç§æ¨¡å‹</h4> <p>åœ¨ç†è®ºä¸ŠäºŒåˆ†çš„æ¨¡å‹æ˜¯ç»Ÿä¸€çš„ï¼Œä½†æ˜¯åœ¨å®é™…ç¼–ç ä¸­ï¼Œç”±äºä¸€ä¸ªåºåˆ—çš„ä¸¤ä¸ªå­åºåˆ—ä¸€å®šæœ‰ä½ç½®ä¹‹åˆ†ï¼ˆä¸€èˆ¬åˆ†ä¸ºå·¦å³ä¸¤ä¸ªå­åºåˆ—ï¼‰ï¼Œé‚£ä¹ˆæ ¹æ®ã€Œå·¦å­åºåˆ—ä¸­çš„å…ƒç´ æ»¡è¶³æ¡ä»¶ã€ã€ã€Œå³å­åºåˆ—ä¸­çš„å…ƒç´ æ»¡è¶³æ¡ä»¶ã€å¯ä»¥åˆ†ä¸ºå·¦å³ä¸¤ç§æ¨¡å‹ã€‚</p> <h5 id="å³äºŒåˆ†æ¨¡å‹">å³äºŒåˆ†æ¨¡å‹</h5> <p>æ­¤æ¨¡å‹å¯¹åº”çš„æ˜¯ã€Œå·¦å­åºåˆ—ä¸­çš„å…ƒç´ æ»¡è¶³æ¡ä»¶ã€ã€‚å› ä¸ºäºŒåˆ†çš„è§£çš„æ„ä¹‰åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ç‰¹åŒ–ä¸ºã€Œå·¦å­åºåˆ—ä¸­æœ€å³è¾¹çš„å…ƒç´ ã€ã€‚</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">type</span> <span class="p">&gt;</span>
<span class="n">type</span> <span class="nf">rfind</span><span class="p">(</span><span class="k">const</span> <span class="n">type</span> <span class="n">l</span><span class="p">,</span> <span class="k">const</span> <span class="n">type</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">static</span> <span class="n">type</span> <span class="n">mid</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">==</span> <span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">l</span><span class="p">;</span>
	<span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">l</span> <span class="o">+</span> <span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1u</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">mid</span><span class="p">))</span> <span class="k">return</span> <span class="n">rfind</span><span class="p">(</span><span class="n">mid</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">return</span> <span class="n">rfind</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">mid</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h5 id="å·¦äºŒåˆ†æ¨¡å‹">å·¦äºŒåˆ†æ¨¡å‹</h5> <p>æ­¤æ¨¡å‹å¯¹åº”çš„æ˜¯ã€Œå³å­åºåˆ—ä¸­çš„å…ƒç´ æ»¡è¶³æ¡ä»¶ã€ã€‚å› ä¸ºäºŒåˆ†çš„è§£çš„æ„ä¹‰åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ç‰¹åŒ–ä¸ºã€Œå³å­åºåˆ—ä¸­æœ€å·¦è¾¹çš„å…ƒç´ ã€ã€‚</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">type</span> <span class="p">&gt;</span>
<span class="n">type</span> <span class="nf">lfind</span><span class="p">(</span><span class="k">const</span> <span class="n">type</span> <span class="n">l</span><span class="p">,</span> <span class="k">const</span> <span class="n">type</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">static</span> <span class="n">type</span> <span class="n">mid</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">==</span> <span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">l</span><span class="p">;</span>
	<span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">l</span> <span class="o">+</span> <span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1u</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">mid</span><span class="p">))</span> <span class="k">return</span> <span class="n">lfind</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">return</span> <span class="n">lfind</span><span class="p">(</span><span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h5 id="äºŒåˆ†çš„ç¼–ç ç»†èŠ‚">äºŒåˆ†çš„ç¼–ç ç»†èŠ‚</h5> <ul> <li>ä¸¤ä¸ªæ¨¡å‹ä¸­åˆ†æ²»æ—¶ä¼ é€’å‚æ•°ä¸åŒï¼Œæ˜¯ç”±å…¶äºŒåˆ†æ„ä¹‰å†³å®šçš„ã€‚</li> <li>åœ¨\(check(mid) = true\)è¿™ä¸ªåˆ†æ”¯ä¸­ï¼Œéœ€è¦ä¿è¯å­ç»“æ„çš„èŒƒå›´ä¸€å®šå°äºæœ¬å±‚èŒƒå›´ï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯ã€‚ <ul> <li>\(rfind\)ä¸­è¦é¿å…\(mid = l\)ï¼Œåˆ™\(mid = (l + r + 1) \gg 1u\)ã€‚</li> <li>\(lfind\)ä¸­è¦é¿å…\(mid + 1 = r\)ï¼Œåˆ™\(mid = (l + r - 1)\gg 1u\)ã€‚</li> </ul> </li> </ul> <h3 id="å°è£…ä¸Šä¸‹ç•Œå‡½æ•°upper_bound-lower_bound">å°è£…ï¼šä¸Šä¸‹ç•Œå‡½æ•°\(upper\_bound,\ lower\_bound\)</h3> <p>æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“äºŒåˆ†ç®—æ³•ä¸€å®šæ˜¯å¯ä»¥å¾—åˆ°è§£çš„ï¼Œä½†ä¸€ä¸ªåºåˆ—ä¸ä¸€å®šæ˜¯å¯ä»¥äºŒåˆ†çš„ã€‚æ±‚è§£é—®é¢˜çš„æµç¨‹åº”è¯¥æ˜¯ï¼š</p> <p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZ3JhcGggTFJcbnF1ZXN0aW9uW-W6j-WIl10gLS0-IGp1ZGdle-aYr-WQpuWPr-iiq-S6jOWIhn1cbmp1ZGdlIC0tPnzlj6_ooqvkuozliIZ8YmZpbmQo5LqM5YiGKVxuYmZpbmQgLS0-IGFucygo6KejKSlcbmp1ZGdlIC0tPnzkuI3lj6_ooqvkuozliIZ8bm9hbnMoKOaXoOinoykpIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifX0"></p> <p>ä½†æ˜¯å¯¹äºä¸€ä¸ªå°è£…å¥½çš„å‡½æ•°ï¼Œè¢«è°ƒç”¨æ˜¯ä¸€å®šè¦æ‰§è¡Œçš„ï¼Œé‚£ä¹ˆæ— è§£çš„æƒ…å†µå°±ä»¥è¿”å›ä¸€ä¸ªæŒ‡å‘æœ‰æ•ˆåºåˆ—ä¹‹å¤–çš„åœ°å€ä»£è¡¨ï¼Œå’Œ\(STL\)çš„è§„èŒƒä¸€è‡´ï¼Œæ— è§£æ—¶è¿”å›è¾¹ç•Œ\(r\)ã€‚æ­¤æ—¶æ±‚è§£é—®é¢˜çš„æµç¨‹å°±å˜ä¸ºï¼š</p> <p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZ3JhcGggTFJcbnF1ZXN0aW9uW-W6j-WIl10gLS0-fOS6jOWIhnwgYWRkcmVzc1vlnLDlnYBdXG5hZGRyZXNzIC0tPiBqdWRnZXvmmK_lkKbmnInmlYh9XG5qdWRnZSAtLT585pyJ5pWI5Zyw5Z2AfCBhbnMoKOinoykpXG5qdWRnZSAtLT585peg5pWI5Zyw5Z2AfCBub2Fucygo5peg6KejKSkiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9fQ"></p> <p>ä¸‹é¢å¯¹æ¯”ä¸€ä¸‹ä¸Šä¸‹ç•Œå‡½æ•°å’ŒäºŒåˆ†æ¨¡å‹çš„åŒºåˆ«ä¸è”ç³»ã€‚</p> <p><img src="/assets/images/algorithm/basic/bfind_bound_diff.svg" alt="bfind_bound"></p> <p><em>æ³¨æ„ä¸Šä¸‹ç•Œå‡½æ•°ä¸­\(comp\)çš„å‚æ•°é¡ºåºä¸åŒã€‚</em></p> <h2 id="å‰ç¼€å’Œä¸å·®åˆ†">å‰ç¼€å’Œä¸å·®åˆ†</h2> <p>å‰ç¼€å’Œä¸å·®åˆ†éƒ½æ˜¯ä¸€ç§é¢„å¤„ç†çš„æ‰‹æ®µï¼Œç”¨äºä¼˜åŒ–åŒºé—´æ“ä½œï¼šå‰ç¼€å’Œä¼˜åŒ–åŒºé—´æ±‚å’Œçš„é€Ÿåº¦ï¼›å·®åˆ†ä¼˜åŒ–åŒºé—´æ›´æ–°ï¼ˆç‰¹æŒ‡åŒºé—´ä¸­ç´ æœ‰å…ƒç´ åŠ ä¸Šä¸€ä¸ªæ•°ï¼‰çš„é€Ÿåº¦ã€‚</p> <h3 id="å‰ç¼€å’Œ">å‰ç¼€å’Œ</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">type</span> <span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">prefix</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="n">type</span> <span class="n">ar</span><span class="p">[</span><span class="n">maxn</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
	<span class="kt">void</span> <span class="n">init</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="n">ar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">ar</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
	<span class="p">}</span>
	<span class="n">type</span> <span class="n">solve</span><span class="p">(</span><span class="kt">int</span> <span class="n">l</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">ar</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">-</span> <span class="n">ar</span><span class="p">[</span><span class="n">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span> <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <h3 id="å·®åˆ†">å·®åˆ†</h3> <p>å·®åˆ†å…¶å®å°±æ˜¯å‰ç¼€å’Œçš„é€†ã€‚</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">type</span> <span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">fidif</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="n">type</span> <span class="n">ar</span><span class="p">[</span><span class="n">maxn</span> <span class="o">+</span> <span class="mi">2</span><span class="p">];</span>
	<span class="kt">void</span> <span class="n">init</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
			<span class="n">ar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">ar</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
	<span class="p">}</span>
	<span class="kt">void</span> <span class="n">modify</span><span class="p">(</span><span class="kt">int</span> <span class="n">l</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="n">type</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="n">ar</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c</span><span class="p">,</span> <span class="n">ar</span><span class="p">[</span><span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <h3 id="å¤šç»´å‰ç¼€å’Œä¸å·®åˆ†">å¤šç»´å‰ç¼€å’Œä¸å·®åˆ†</h3> <ul> <li>
<strong>åˆå§‹åŒ–</strong>ï¼šå…ˆååˆ†åˆ«å¯¹å„ä¸ªç»´åº¦åšä¸€ç»´çš„åˆå§‹åŒ–ã€‚</li> <li>
<strong>æ“ä½œ</strong>ï¼šå¤šç»´å‰ç¼€å’Œçš„åŒºé—´æ±‚å’Œä¸å¤šç»´å·®åˆ†çš„åŒºé—´æ›´æ–°éƒ½æ˜¯å¯¹ã€Œå®¹æ–¥åŸç†ã€çš„åº”ç”¨ã€‚</li> </ul> <h2 id="å¸¸ç”¨æ’åºåŠå…¶åŸºæœ¬åº”ç”¨">å¸¸ç”¨æ’åºåŠå…¶åŸºæœ¬åº”ç”¨</h2> <p>è¿™é‡Œè¯´ä¸€è¯´ä¸¤ä¸ªæ’åºç®—æ³•ï¼šå¿«æ’å’Œå¹¶å½’ã€‚å®ƒä»¬éƒ½è¾ƒå¥½çš„è¿ç”¨äº†åŒæŒ‡é’ˆæ€æƒ³ï¼Œæ˜¯åº”ç”¨æ¯”è¾ƒå¤šä¸”æ€æƒ³æ¯”è¾ƒå¥½çš„æ’åºç®—æ³•ã€‚å…ˆæ¥çœ‹çœ‹ä¸¤ä¸ªç®—æ³•åœ¨å‡ ä¸ªæ–¹é¢çš„å¯¹æ¯”ï¼š</p> <table> <thead> <tr> <th style="text-align: right">Â </th> <th style="text-align: center">å¿«é€Ÿæ’åº</th> <th style="text-align: center">å¹¶å½’æ’åº</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">æ˜¯å¦ç¨³å®š</td> <td style="text-align: center">ä¸ç¨³å®š</td> <td style="text-align: center">ç¨³å®š</td> </tr> <tr> <td style="text-align: right">æµç¨‹</td> <td style="text-align: center">ç¡®å®šåˆ†ç•Œå€¼ï¼Œå¤„ç†æœ¬å±‚ï¼Œå¾—åˆ°åˆ†ç•Œç‚¹ï¼Œåˆ†æ²»å­ç»“æ„</td> <td style="text-align: center">ç¡®å®šåˆ†ç•Œç‚¹ï¼Œåˆ†æ²»å­ç»“æ„ï¼Œå¤„ç†æœ¬å±‚</td> </tr> <tr> <td style="text-align: right">å¤–éƒ¨ç©ºé—´</td> <td style="text-align: center">ä¸éœ€è¦</td> <td style="text-align: center">éœ€è¦ä¸€å€å¤–éƒ¨ç©ºé—´</td> </tr> </tbody> </table> <p>å¯ä»¥å‘ç°å¿«é€Ÿæ’åºæ˜¯ã€Œè‡ªä¸Šè€Œä¸‹ã€çš„æ’åºï¼Œè€Œå¹¶å½’æ˜¯ã€Œè‡ªä¸‹è€Œä¸Šã€çš„ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ‰€æœ‰å’Œæ’åºç›¸å…³çš„é™„åŠ æ“ä½œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªç®—æ³•çš„æµç¨‹çš„å®ç°ã€‚</p> <h3 id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</h3> <p>æˆ‘ä»¬ä»¥å°†ä¸€ä¸ªåºåˆ—ä»å°åˆ°å¤§æ’åºä¸ºä¾‹ï¼Œè§£é‡Šä¸€ä¸‹å¿«æ’çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>å¯¹äºç»™å®šçš„ä¸€ä¸ªåºåˆ—\([l, r)\)ï¼Œè‹¥å¯¹äº\(\forall mid\in [l + 1, r - 1)\)ï¼Œéƒ½æ»¡è¶³åºåˆ—\([l, mid)\)ä¸­çš„æœ€å¤§å€¼ä¸å¤§äºåºåˆ—\([mid, r)\)ä¸­çš„æœ€å°å€¼ï¼Œåˆ™å¯ä»¥ç¡®å®šåºåˆ—\([l, r)\)æ˜¯ä»å°åˆ°å¤§æ’åºå®Œæˆçš„ã€‚</strong></p> <p>è€Œå¿«æ’æ‰€åšçš„äº‹æƒ…å°±æ˜¯ï¼š<strong>å¯¹äºä¸€ä¸ªç»™å®šçš„åºåˆ—\([l, r)\)ï¼Œç§»åŠ¨å…¶ä¸­éƒ¨åˆ†å…ƒç´ ä½¿å¾—\(\exists mid\in [l + 1, r - 1)\)ä½¿å¾—åºåˆ—\([l, mid)\)ä¸­çš„æœ€å¤§å€¼ä¸å¤§äºåºåˆ—\([mid, r)\)ä¸­çš„æœ€å°å€¼ï¼Œç„¶ååˆ†æ²»è¿™ä¸¤ä¸ªå­åºåˆ—ã€‚</strong></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">type</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Comp</span> <span class="p">&gt;</span>
<span class="kt">void</span> <span class="nf">ksort</span><span class="p">(</span><span class="n">type</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="kt">int</span> <span class="n">l</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="n">Comp</span> <span class="n">cmp</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">static</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">type</span> <span class="n">x</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">&gt;=</span> <span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="p">;</span>
	<span class="n">i</span> <span class="o">=</span> <span class="n">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
	<span class="n">x</span> <span class="o">=</span> <span class="n">v</span><span class="p">[(</span><span class="n">l</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1u</span><span class="p">];</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">cmp</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="o">++</span><span class="n">i</span><span class="p">],</span> <span class="n">x</span><span class="p">))</span> <span class="p">;</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">cmp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="o">--</span><span class="n">j</span><span class="p">]))</span> <span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">)</span> <span class="n">swap</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
	<span class="p">}</span>
	<span class="n">ksort</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>
	<span class="n">ksort</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>å¯ä»¥æ³¨æ„åˆ°\(i, j\)æ˜¯ç­‰ä»·çš„ï¼Œéƒ½å¯ä»¥ä½œä¸ºåºåˆ—çš„åˆ’åˆ†ç‚¹ã€‚å®ç°ç»†èŠ‚ä¸Šç•¥éœ€æ³¨æ„ï¼š</p> <ul> <li>ä¸€èˆ¬åŒºé—´ä¸­å¾…æ¯”è¾ƒçš„å…ƒç´ \(x\)æœ‰è¿™å‡ ç§é€‰æ³•ï¼šæœ€å·¦/å³è¾¹çš„å…ƒç´ ï¼Œä¸­é—´å…ƒç´ ï¼Œéšæœºå…ƒç´ ã€‚å¯¹äºéšæœºæ•°æ®ï¼Œå®ƒä»¬çš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ä¸€æ ·çš„ï¼Œä½†è‹¥åˆå§‹åºåˆ—ä¸ºå®Œå…¨ç›¸åçš„æ’åºçŠ¶æ€ï¼Œåˆ™é€‰ç”¨æœ€å·¦/å³è¾¹çš„å…ƒç´ å°†è¾¾åˆ°æœ€åæ—¶é—´å¤æ‚åº¦ã€‚å¯¹äºä¸­é—´å…ƒç´ å’Œéšæœºå…ƒç´ ï¼Œä¸€èˆ¬é€‰ç”¨å®ç°è¾ƒä¸ºç®€å•çš„ä¸­é—´å…ƒç´ ã€‚</li> <li>ä»¥\(i\)ä½œä¸ºåˆ’åˆ†ç‚¹æ—¶ï¼Œ\(x\)ä¸èƒ½å–ç”¨å½“å‰åŒºé—´æœ€å·¦è¾¹å…ƒç´ ï¼Œå¦åˆ™å°†æœ‰å¯èƒ½é€ æˆæ­»å¾ªç¯ã€‚ä¸€èˆ¬å®ç°ä¸º\(x = v[(l+r)\gg 1u]\)ã€‚</li> <li>åŒç†ï¼Œ\(j\)ä½œä¸ºåˆ’åˆ†ç‚¹æ—¶ï¼Œ\(x = v[(l+r-1)\gg 1u]\)ã€‚</li> <li>\(Comp\)å¯ä»¥ä¸º\(less, greater\)ã€‚</li> </ul> <h4 id="æŸ¥æ‰¾ç¬¬kå°å¤§çš„æ•°">æŸ¥æ‰¾ç¬¬kå°/å¤§çš„æ•°</h4> <p>è‹¥åˆ’åˆ†ç‚¹æ‰€åœ¨ä½ç½®å…ƒç´ çš„å€¼ä¸å¾…æ¯”è¾ƒå…ƒç´ \(x\)çš„å€¼ç›¸ç­‰ï¼Œåˆ™åˆ’åˆ†ç‚¹æ‰€åœ¨ä½ç½®çš„å…ƒç´ åœ¨æ’åºå®Œæˆçš„æ•´ä¸ªåºåˆ—ä¸­ä½ç½®å·²ç»ç¡®å®šä¸ºè¯¥ä½ç½®ã€‚ä¸‹é¢ä»¥\(i\)ä¸ºåˆ’åˆ†ç‚¹ä¸ºä¾‹ï¼š</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">==</span> <span class="n">k</span><span class="p">)</span> <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">)</span> <span class="k">return</span> <span class="nf">seek</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>
<span class="k">else</span> <span class="k">return</span> <span class="nf">seek</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>
</code></pre></div></div> <h3 id="å¹¶å½’æ’åº">å¹¶å½’æ’åº</h3> <p>å¹¶å½’æ’åºçš„æ ¸å¿ƒæ€æƒ³è¾ƒä¸ºå®¹æ˜“ç†è§£ï¼š<strong>å¯¹äºä¸€ä¸ªç»™å®šçš„åºåˆ—\([l, r)\)ï¼Œé€šè¿‡ä¸­é—´ç‚¹\(mid\)å°†å…¶åˆ’åˆ†ä¸º\([l, mid), [mid, r)\)ä¸¤ä¸ªå­åºåˆ—å¹¶åˆ†æ²»ä½¿å­åºåˆ—æ’åºå®Œæˆï¼Œç„¶ååˆå¹¶å®ƒä»¬ã€‚</strong></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">type</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Comp</span> <span class="p">&gt;</span>
<span class="kt">void</span> <span class="nf">msort</span><span class="p">(</span><span class="n">type</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="kt">int</span> <span class="n">l</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="n">Comp</span> <span class="n">cmp</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">static</span> <span class="n">type</span> <span class="n">bak</span><span class="p">[</span><span class="n">maxn</span><span class="p">];</span>
	<span class="k">static</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">pos</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">&gt;=</span> <span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="p">;</span>
	<span class="k">const</span> <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">l</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1u</span><span class="p">;</span>
	<span class="n">msort</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>
	<span class="n">msort</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>
	<span class="n">i</span> <span class="o">=</span> <span class="n">l</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">mid</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">l</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">mid</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">cmp</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]))</span> <span class="n">bak</span><span class="p">[</span><span class="n">pos</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">];</span>
		<span class="k">else</span> <span class="n">bak</span><span class="p">[</span><span class="n">pos</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">];</span>
	<span class="p">}</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">mid</span><span class="p">)</span> <span class="n">bak</span><span class="p">[</span><span class="n">pos</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">];</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">)</span> <span class="n">bak</span><span class="p">[</span><span class="n">pos</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">];</span>
	<span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="n">pos</span> <span class="o">&gt;=</span> <span class="n">l</span><span class="p">)</span> <span class="n">v</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">bak</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div> <p>éœ€è¦æ³¨æ„ï¼š</p> <ul> <li>ç”±äºå¹¶å½’æ’åºçš„åˆ†æ²»åœ¨æœ¬å±‚æ“ä½œä¹‹å‰ï¼Œæ‰€ä»¥\(mid\)çš„ç±»å‹ä¸€å®šä¸èƒ½æ˜¯\(static\)ã€‚</li> <li>\(Comp\)å¯ä»¥ä¸º\(less\_equal, greater\_equal\)ã€‚</li> </ul> <h4 id="è®¡ç®—æ­£é€†åºå¯¹">è®¡ç®—æ­£/é€†åºå¯¹</h4> <p>å¯¹äºä¸€ä¸ªç»™å®šçš„åºåˆ—\([l, r)\)ï¼Œå¯ä»¥æŠŠå…¶ä¸­çš„æœ‰åºæ•°å¯¹\(\{e, u\}\)åˆ†ä¸º3ç§ï¼š</p> <ul> <li>\(e, u\in [l, mid)\)ï¼Œè¿™éƒ¨åˆ†æ­£/é€†åºå¯¹ç”±åˆ†æ²»\([l, mid)\)æ—¶æ±‚å¾—ã€‚</li> <li>\(e, u\in [mid, r)\)ï¼Œè¿™éƒ¨åˆ†æ­£/é€†åºå¯¹ç”±åˆ†æ²»\([mid, r)\)æ—¶æ±‚å¾—ã€‚</li> <li>\(e\in [l, mid), u\in [mid, r)\)ï¼Œè¿™éƒ¨åˆ†ç”±æœ¬å±‚å¹¶å½’æ—¶æ±‚å¾—ã€‚</li> </ul> <p>æ˜¾ç„¶ç¬¬3ç§æƒ…å†µæ˜¯éœ€è¦å¤„ç†çš„é‡ç‚¹ï¼Œæˆ‘ä»¬ä»¥åˆ†æä»å°åˆ°å¤§æ’åºçš„æ­£/é€†åºå¯¹çš„è®¡ç®—ä¸ºä¾‹ï¼š</p> <p><img src="/assets/images/algorithm/basic/digit_pair.svg" alt="digitpair"></p> <ul> <li>è‹¥\(v[i]\leqslant v[j]\)ï¼Œåˆ\(v[j]\leqslant v[j+1]\leqslant \cdots\leqslant v[r-1]\)ï¼Œæ‰€ä»¥æœ‰\(\forall x\in [j, r)\)æ»¡è¶³\(v[i]\leqslant v[x]\)ï¼Œå…±ç¡®å®šäº†\(r - j\)ä¸ªæ­£åºå¯¹ã€‚</li> <li>è‹¥\(v[i] &gt; v[j]\)ï¼Œåˆ\(v[i]\leqslant v[i+1]\leqslant\cdots\leqslant v[mid-1]\)ï¼Œæ‰€ä»¥æœ‰\(\forall x\in [i, mid)\)æ»¡è¶³\(v[x] &gt; v[j]\)ï¼Œå…±ç¡®å®šäº†\(mid-i\)ä¸ªé€†åºå¯¹ã€‚</li> </ul> <h2 id="ä½è¿ç®—ä¸äºŒè¿›åˆ¶">ä½è¿ç®—ä¸äºŒè¿›åˆ¶</h2> <h3 id="å¿«é€Ÿæšä¸¾ç»„åˆ">å¿«é€Ÿæšä¸¾ç»„åˆ</h3> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;&gt;</span> <span class="n">j</span> <span class="o">&amp;</span> <span class="mi">1u</span><span class="p">)</span>
            <span class="p">...</span>
</code></pre></div></div> <h3 id="å¿«é€Ÿå¹‚ä¸é¾Ÿé€Ÿä¹˜">å¿«é€Ÿå¹‚ä¸é¾Ÿé€Ÿä¹˜</h3> <p>å¿«é€Ÿå¹‚æ˜¯å°†\(O(n)\)çš„ä¹˜æ–¹é€šè¿‡\(O(\log n)\)çš„ä¹˜æ³•å®ç°ï¼›é¾Ÿé€Ÿä¹˜æ˜¯å°†\(O(1)\)çš„ä¹˜æ³•é€šè¿‡\(O(\log n)\)çš„åŠ æ³•å®ç°ã€‚é¾Ÿé€Ÿä¹˜è™½ç„¶æ…¢ï¼Œä½†æ˜¯å¯¹äºå¤§æ•°ç›¸ä¹˜åˆ«æ— ä»–æ³•ã€‚</p> <h4 id="å¿«é€Ÿå¹‚">å¿«é€Ÿå¹‚</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">llong</span> <span class="nf">qpow</span><span class="p">(</span><span class="n">llong</span> <span class="n">x</span><span class="p">,</span> <span class="n">llong</span> <span class="n">a</span><span class="p">,</span> <span class="n">llong</span> <span class="n">mod</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">static</span> <span class="n">llong</span> <span class="n">ret</span><span class="p">;</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&amp;</span> <span class="mi">1u</span><span class="p">)</span> <span class="p">(</span><span class="n">ret</span> <span class="o">*=</span> <span class="n">x</span><span class="p">)</span> <span class="o">%=</span> <span class="n">mod</span><span class="p">;</span>
		<span class="p">(</span><span class="n">x</span> <span class="o">*=</span> <span class="n">x</span><span class="p">)</span> <span class="o">%=</span> <span class="n">mod</span><span class="p">;</span>
		<span class="n">a</span> <span class="o">&gt;&gt;=</span> <span class="mi">1u</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <h4 id="é¾Ÿé€Ÿä¹˜">é¾Ÿé€Ÿä¹˜</h4> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ullong</span> <span class="nf">smul</span><span class="p">(</span><span class="n">ullong</span> <span class="n">a</span><span class="p">,</span> <span class="n">ullong</span> <span class="n">b</span><span class="p">,</span> <span class="n">ullong</span> <span class="n">mod</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">static</span> <span class="n">ullong</span> <span class="n">ret</span><span class="p">;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mi">1u</span><span class="p">)</span> <span class="p">(</span><span class="n">ret</span> <span class="o">+=</span> <span class="n">a</span><span class="p">)</span> <span class="o">%=</span> <span class="n">mod</span><span class="p">;</span>
		<span class="p">(</span><span class="n">a</span> <span class="o">&lt;&lt;=</span> <span class="mi">1u</span><span class="p">)</span> <span class="o">%=</span> <span class="n">mod</span><span class="p">;</span>
		<span class="n">b</span> <span class="o">&gt;&gt;=</span> <span class="mi">1u</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="å­—ç¬¦ä¸²å“ˆå¸Œ">å­—ç¬¦ä¸²å“ˆå¸Œ</h2> <p>è¿™é‡Œä»‹ç»ä¸€ç§å¸¸ç”¨ä¸”å¾ˆè‘—åçš„å­—ç¬¦ä¸²å“ˆå¸Œæ–¹æ³•â€”â€”<strong>BKHDHash</strong>ã€‚è¿™ç§å“ˆå¸Œæ–¹æ³•æ˜¯å°†å­—ç¬¦ä¸²ç†è§£ä¸ºä¸€ä¸ª\(p\)è¿›åˆ¶çš„æ•°ã€‚ç”±äºæˆ‘ä»¬éœ€è¦åŒºé—´å“ˆå¸Œï¼Œæ‰€ä»¥è¦å€ŸåŠ©å‰ç¼€å’Œçš„æ€æƒ³ã€‚æ ¹æ®ç»éªŒï¼Œ\(p\)å–å€¼ä¸º131æˆ–1331ï¼Œå­—ç¬¦çš„å€¼æ˜ å°„ä¸ºå¯¹åº”çš„ASCIIç å€¼ï¼ŒåŒºé—´å“ˆå¸Œå€¼å¯¹\(2^{64}\)å–æ¨¡æ—¶å†²çªç‡æå°ã€‚ç›´æ¥ä½¿ç”¨\(unsigned\ long\ long\)ç±»å‹å­˜å‚¨ï¼Œæº¢å‡ºå³å–æ¨¡ã€‚</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">strhash</span> <span class="p">{</span>
	<span class="n">string</span> <span class="n">s</span><span class="p">;</span>
	<span class="n">ullong</span> <span class="n">ar</span><span class="p">[</span><span class="n">maxn</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="p">{};</span>
	<span class="n">ullong</span> <span class="n">bin</span><span class="p">[</span><span class="n">maxn</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">{</span><span class="mi">1ULL</span><span class="p">};</span>
	<span class="k">const</span> <span class="n">ullong</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">131ULL</span><span class="p">;</span>
<span class="nl">public:</span>
	<span class="k">explicit</span> <span class="n">string_hash</span><span class="p">(</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span><span class="o">:</span><span class="n">s</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">str</span><span class="p">))</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">ar</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">base</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
			<span class="n">bin</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">bin</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">base</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">ullong</span> <span class="n">hash</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">l</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">ar</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">-</span> <span class="n">ar</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">*</span> <span class="n">bin</span><span class="p">[</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span><span class="p">];</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> </div> </div> </div> </div> </div> <footer> <div class="container"> <div class="row"> <div class="col-lg-8"> <p>Mooyyu Crab.'s Blog <i class="fa fa-heart text-danger" aria-hidden="true"></i>. Check out <a href="//github.com/mooyyu/mooyyu.github.io" target="_blank">Github Project <i class="fa fa-github-alt" aria-hidden="true"></i></a>.<br> The contents of this website are Â© 2021 under the terms of the <a href="//www.gnu.org/licenses/gpl-3.0.txt" target="_blank">GPLv3</a> License.</p> </div> <div class="col-lg-4"> <div class="pull-right"> <a href="#top" data-proofer-ignore> Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a> </div> </div> </div> </div> </footer> <div style="width: 100%; overflow-x: hidden;"> <canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:99999999;pointer-events:none;"></canvas> </div> <script>
  MathJax = {
    options: {
      enableMenu: false
    }
  };
</script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js"></script> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-128176907-1', {
          'cookieDomain': 'mooyyu.github.io',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script> </body> </html>
